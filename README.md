# Creating 2D Dynamic Occupancy Grids (DOGMa) from CARLA

<p align="center">
  <img src="./dogma_seq.gif" width="300" alt="Demo GIF">
</p>


## Features

- **Environment and Docker Setup (`environment.yml`, `docker-compose.yml`):**  
  Quickly reproduce the required environment and run the setup in a containerized manner.

- **Simulation Recording (`record_carla_sim.py`, `utils.py`):**  
  Scripts to record sensor data from the CARLA simulator.
  
- **Jupyter Notebook (`create_dogmas.ipynb`):**  
  Reads files generated by `record_carla_sim.py` to perform ray tracing, create occupancy / velocity maps, and generate mp4s. 
  

## Getting Started

1. **Installing Carla**
    - Follow this great article to install Carla: https://antc2lt.medium.com/carla-simulator-in-docker-in-2023-1f11f240b2df

1. **Set Up a conda Environment:**
   -
     ```bash
     conda env create -f environment.yml
     conda activate carla_env
     ```
   - If using Docker:
     ```bash
     docker compose up
     ```
   This will launch a container with all dependencies installed.

2. **Run the Simulation and Record Data:**
   - Start CARLA simulator.
   - Execute:
     ```bash
     python record_carla_sim.py
     ```
   to record sensor data based on `sensor_coords.yml` and `simulation_config.yml`.

3. **Generate DOGMa:**
   - Launch the notebook:
     ```bash
     jupyter notebook create_dogmas.ipynb
     ```
   - Follow the notebook cells to process recorded data into DOGMa grids.
